# ═══════════════════════════════════════════════════════════════════════════════
# VERALUX MULTI-TENANT AI RECEPTIONIST - CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

# ────────────────────────────────────────────────
# Core Settings
# ────────────────────────────────────────────────
NODE_ENV=development
PORT=4000

# Logging level (debug, info, warn, error)
LOG_LEVEL=info

# Request timeout in milliseconds (default: 30000)
REQUEST_TIMEOUT_MS=30000

# ────────────────────────────────────────────────
# Database Configuration
# ────────────────────────────────────────────────
DATABASE_URL=postgres://veralux:veralux@localhost:5432/veralux

# Connection pool settings
DATABASE_POOL_MAX=10
DATABASE_POOL_MIN=2
DATABASE_POOL_IDLE_TIMEOUT_MS=30000
DATABASE_POOL_CONNECTION_TIMEOUT_MS=5000

# ────────────────────────────────────────────────
# Redis Configuration
# Required when ENABLE_RUNTIME_ADMIN=true or ADMIN_RATE_USE_REDIS=true
# ────────────────────────────────────────────────
REDIS_URL=redis://127.0.0.1:6379

# ────────────────────────────────────────────────
# Admin Authentication
# ────────────────────────────────────────────────
# Auth mode: hybrid (allow API key or JWT), jwt-only (JWT only in production)
ADMIN_AUTH_MODE=hybrid

# API key for admin access (use strong random value in production)
ADMIN_API_KEY=change-me

# JWT secret for admin access (at least 24 characters in production)
ADMIN_JWT_SECRET=change-me

# Comma-separated list of allowed origins for CORS (required in production)
ADMIN_ALLOWED_ORIGINS=http://localhost:4000

# Allow API keys in production (default: false in jwt-only mode)
# ALLOW_ADMIN_API_KEY_IN_PROD=false

# Require Origin header in production (default: false for backward compatibility)
# REQUIRE_CORS_ORIGIN=false

# ────────────────────────────────────────────────
# Secrets Management
# ────────────────────────────────────────────────
# Options: db (encrypted in database), aws (AWS Secrets Manager), env (environment variables)
SECRET_MANAGER=db

# Must be at least 32 bytes (UTF-8) when SECRET_MANAGER=db; use a cryptographically random value in production
SECRET_ENCRYPTION_KEY=change-me-change-me-change-me-change-me

# ────────────────────────────────────────────────
# Runtime Admin Routes
# ────────────────────────────────────────────────
ENABLE_RUNTIME_ADMIN=true
ALLOW_RUNTIME_SECRET_READ=true

# Voice runtime URL for active call voice control (optional)
# VOICE_RUNTIME_URL=http://localhost:8000

# ────────────────────────────────────────────────
# Rate Limiting
# ────────────────────────────────────────────────
# Maximum requests per window
ADMIN_RATE_MAX=100

# Window size in milliseconds (default: 5 minutes)
ADMIN_RATE_WINDOW_MS=300000

# Use Redis for rate limiting (required for multi-instance deployments)
ADMIN_RATE_USE_REDIS=false

# ────────────────────────────────────────────────
# Voice Recording Uploads
# ────────────────────────────────────────────────
# Directory for storing voice recordings
# VOICE_RECORDINGS_DIR=/path/to/recordings

# Base URL for accessing recordings (defaults to server URL)
# VOICE_RECORDINGS_BASE_URL=https://cdn.example.com

# Maximum file size in MB (default: 10)
VOICE_RECORDING_MAX_SIZE_MB=10

# ────────────────────────────────────────────────
# LLM Configuration
# ────────────────────────────────────────────────
LLM_PROVIDER=local
LOCAL_LLM_URL=http://127.0.0.1:8080/completion
OPENAI_MODEL=gpt-4o-mini
OPENAI_API_KEY=

# ────────────────────────────────────────────────
# Telnyx Phone Number Provisioning (Optional)
# ────────────────────────────────────────────────
# Get your API key from: https://portal.telnyx.com/#/app/api-keys
TELNYX_API_KEY=

# Connection ID (optional - auto-created if not set but VERALUX_WEBHOOK_URL is set)
TELNYX_CONNECTION_ID=

# Your public webhook URL for voice calls (required for auto-provisioning)
VERALUX_WEBHOOK_URL=https://your-server.example.com/api/telnyx/call-control

# ────────────────────────────────────────────────
# Cognito OAuth (Optional)
# ────────────────────────────────────────────────
# COGNITO_DOMAIN=
# COGNITO_CLIENT_ID=
# COGNITO_CLIENT_SECRET=
# COGNITO_REDIRECT_URI=
# COGNITO_USER_POOL_ID=

# ────────────────────────────────────────────────
# Default Tenant
# ────────────────────────────────────────────────
DEFAULT_TENANT_ID=default

# ═══════════════════════════════════════════════════════════════════════════════
# NOTE: Voice runtime settings (WHISPER_URL, KOKORO_URL, XTTS_*) have been moved
# to the veralux-voice-runtime service.
# ═══════════════════════════════════════════════════════════════════════════════

